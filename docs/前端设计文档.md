# 智能实验室预约与设备管理系统 前端设计文档

## 1. 概述
本文档旨在描述“智能实验室预约与设备管理系统”的前端架构设计。系统旨在提供一个直观、易用的界面，供管理员、教师和学生进行实验室与设备资源的管理和预约。

## 2. 技术栈选择
- **框架**: Vue 3 (Composition API)
- **构建工具**: Vite
- **编程语言**: TypeScript
- **路由管理**: Vue Router 4
- **状态管理**: Pinia
- **UI 组件库**: Element Plus
- **网络请求**: Axios
- **图标库**: Element Plus Icons / FontAwesome

## 3. 项目结构划分
```text
src/
├── api/             # API 请求封装
├── assets/          # 静态资源（图片、全局样式）
├── components/      # 通用组件
├── layout/          # 页面布局组件 (Sidebar, Header, AppMain)
├── router/          # 路由配置
├── store/           # Pinia 状态管理
├── utils/           # 工具函数封装
└── views/           # 业务页面
    ├── login/       # 登录页
    ├── dashboard/   # 首页/仪表盘
    ├── labs/        # 实验室管理
    ├── devices/     # 设备管理
    ├── reservations/ # 预约管理
    └── profile/     # 个人中心
```

## 4. 核心功能设计

### 4.1 认证与权限控制
- **登录**: 支持用户名密码登录，存储 JWT 到 localStorage 或 cookie。
- **RBAC 权限控制**: 
  - 通过路由守卫（Navigation Guards）校验角色权限。
  - 菜单根据用户角色动态生成。
  - 按钮级别权限（v-permission 指令）。

### 4.2 实验室与设备管理
- **列表展示**: 支持搜索、过滤、分页。
- **状态管理**: 颜色标识不同状态（空闲、维护中等）。
- **表单操作**: 弹窗形式实现新增、编辑、状态切换。

### 4.3 预约模块（核心）
- **日历视图**: 集成 FullCalendar 或自定义日历，展示实验室/设备的占用情况。
- **预约流程**:
  1. 选择资源（实验室/设备）。
  2. 选择时间段（单次/多次规则设置）。
  3. 校验冲突（前端初步校验 + 后端实时校验）。
  4. 提交预约申请。
- **冲突提醒**: 针对多次预约，高亮显示冲突的时间段，并提供“部分提交”或“修改重试”选项。

### 4.4 状态机展示
- 前端需根据后端返回的状态枚举，渲染对应的 UI 样式和操作按钮。
  - 例如：`InUse` 状态下显示“结束使用”按钮；`Maintenance` 状态下禁止“预约”操作。

## 5. 路由设计
| 路径 | 功能 | 访问权限 |
| :--- | :--- | :--- |
| `/login` | 用户登录 | 公开 |
| `/dashboard` | 控制台首页 | 所有角色 |
| `/labs` | 实验室列表 | 所有角色（教师/学生仅查看，管理员可编辑） |
| `/devices` | 设备列表 | 所有角色 |
| `/reservations/apply` | 发起预约 | 教师、学生 |
| `/reservations/list` | 预约记录查询 | 所有角色 |
| `/admin/audit` | 预约审核 | 管理员 |
| `/admin/users` | 用户管理 | 管理员 |

## 6. UI/UX 规范
- **布局**: 左侧侧边栏导航，顶部面包屑及用户信息。
- **交互**: 
  - 关键操作（如取消预约、报废设备）需二次确认。
  - 所有的 API 请求需有 Loading 状态和全局错误提示。
- **响应式**: 优先适配桌面端，兼顾移动端基础查看功能。

## 7. 接口契约规范
- 所有接口遵循 RESTful API 规范。
- 统一响应格式：
  ```json
  {
    "code": 200,
    "message": "success",
    "data": { ... }
  }
  ```
- 异常处理：401 跳转登录，403 提示无权，500 提示系统错误。
